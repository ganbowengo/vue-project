{"version":3,"sources":["webpack:///./src/assets/js/http.js"],"names":["axios__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","axios__WEBPACK_IMPORTED_MODULE_0___default","n","axios","interceptors","request","use","config","url","token","sessionStorage","getItem","headers","author","window","location","href","error","Promise","reject","response","MOCK","data"],"mappings":"yFAAA,IAAAA,EAAAC,EAAA,IAAAC,EAAAD,EAAAE,EAAAH,GAGAI,IAAMC,aAAaC,QAAQC,IAAI,SAAUC,GAErCA,EAAOC,IAHM,YAGWD,EAAOC,IAC/B,IAAIC,EAAQC,eAAeC,QAAQ,SAMnC,OALIF,EACAF,EAAOK,QAAQC,OAASJ,EAExBK,OAAOC,SAASC,KAAO,aAEpBT,GACR,SAAUU,GAET,OAAOC,QAAQC,OAAOF,KAG1Bd,IAAMC,aAAagB,SAASd,IAAI,SAAUc,GAEtC,MAA4B,wBAAxBA,EAASb,OAAOC,KACZa,OACAD,EAASR,QAAQC,OAAS,QAEvBO,GAEAA,EAASE,MAErB,SAAUL,GAET,OAAOC,QAAQC,OAAOF,KAGXd,MAAf","file":"static/js/common-a314aa42.js","sourcesContent":["import axios from 'axios'\n\nconst BASE_URL = '/frontend'\naxios.interceptors.request.use(function (config) {\n    // 在发送请求之前做些什么\n    config.url = BASE_URL + config.url\n    let token = sessionStorage.getItem('token')\n    if (token) { // mock 开启时不判断是否有token\n        config.headers.author = token\n    } else {\n        window.location.href = 'login.html'\n    }\n    return config;\n}, function (error) {\n    // 对请求错误做些什么\n    return Promise.reject(error);\n});\n\naxios.interceptors.response.use(function (response) {\n    // 对响应数据做点什么\n    if (response.config.url === '/frontend/sys/token') {\n        if (MOCK) {\n            response.headers.author = 'mock'\n        }\n        return response\n    } else {\n        return response.data;\n    }\n}, function (error) {\n    // 对响应错误做点什么\n    return Promise.reject(error);\n});\n\nexport default axios"],"sourceRoot":""}